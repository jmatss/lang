use std.assert

struct TestStruct
{
    a: i32,
    b: {f64},
    c: i32,
}

implement TestStruct
{
    function add(input: i32) -> i32
    {
        this.a = 20
        this.b.* = 2.0
        return this.a + this.c + input
    }
}

function main() -> int
{
    var b = 1.0
    var test_struct = TestStruct { 10, b.&, 2 }

    var actual_result = test_struct.add(8)

    assert(actual_result == 30)
    assert(test_struct.b.* == 2.0)
    printf("actual_result: %d, test_struct.b.*: %lf", actual_result, test_struct.b.*)
    
    return 0
}