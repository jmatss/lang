use std.assert

struct TestStruct
{
    a: i32,
    b: {f32},
    c: i32,
}

implement TestStruct
{
    function add(input: i32) -> i32
    {
        this.a = 20
        this.b.* = 2.0
        return this.a + this.c + input
    }
}

function main() -> i32
{
    var b = 1.0
    var test_struct = TestStruct { 10, b.&, 2 }

    var actual_result = test_struct.add(8)

    printf("b: %f", b as f64)
    printf("\ntest_struct.a: %d, test_struct.b.*: %f, test_struct.c: %d", test_struct.a, test_struct.b.*, test_struct.c)
    printf("\nactual_result: %d", actual_result)
    assert(b == 2.0)
    assert(test_struct.a == 20 and test_struct.b.* == 2.0 and test_struct.c == 2)
    assert(actual_result == 30)
    
    return 0
}