use std::types::Optional

extern fn printf(format: {u8}, ...) -> i32

struct TypeStruct
{
    len: u64,
}

impl TypeStruct
{
    fn this len() -> u64
    {
        return this.len
    }
}

fn main() -> i32
{
    var x = Optional::value(TypeStruct { 123 })

    var y
    if val is x.value
    {
        y = Optional::value(val.len())
    }
    else
    {
        y = Optional::empty()
    }

    printf("y.get(): %d", y.&.get() as i32)
    std::assert(y.value == 123)

    return 0
}